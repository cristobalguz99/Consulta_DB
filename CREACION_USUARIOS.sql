--CRISTOBAL GUZMAN LORCA


/* CREACION DE USUARIOS SI ESTA TRABAJANDO CON ORACLE CLOUD */
DROP USER MDY2131_P13_1;
DROP ROLE ROL_ADMIN;
DROP PROFILE PERFIL_ADMIN;
DROP USER MDY2131_P13_2;
DROP USER MDY2131_P13_3;
DROP ROLE ROL_DESARROLLO;
DROP PROFILE PERFIL_DES;
DROP USER MDY2131_P13_4;
DROP USER MDY2131_P13_5;
DROP USER MDY2131_P13_6;
DROP ROLE ROL_HUMAN;
DROP ROLE ROL_TRANSA;
DROP PROFILE PERFIL_RRTT
;
--CREACION DE PERFIL ADMIN
CREATE PROFILE PERFIL_ADMIN LIMIT
SESSIONS_PER_USER  1
FAILED_LOGIN_ATTEMPTS  10
PASSWORD_LIFE_TIME 120
;
--CREACION DE USUARIO ADMIN
CREATE USER MDY2131_P13_1 IDENTIFIED BY "MDY2131.practica_13_1"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER MDY2131_P13_1 QUOTA UNLIMITED ON DATA
PROFILE PERFIL_ADMIN
;
--CREACION DE ROL ADMIN
CREATE ROLE ROL_ADMIN;
GRANT CREATE ANY TABLE, UPDATE ANY TABLE, DROP ANY TABLE, CREATE ANY SYNONYM,
    CREATE ANY SEQUENCE, CREATE ANY INDEX, ALTER DATABASE TO ROL_ADMIN;
GRANT ROL_ADMIN TO MDY2131_P13_1;
ALTER USER MDY2131_P13_1 DEFAULT ROLE ROL_ADMIN
;
--PERMISOS PARA CREAR SINONIMOS EN ADMIN
GRANT SELECT ON dba_tables TO MDY2131_P13_2;
CREATE OR REPLACE PUBLIC SYNONYM syn_c
FOR MDY2131_P13_1.CLIENTE;
CREATE OR REPLACE PUBLIC SYNONYM syn_cc
FOR MDY2131_P13_1.CREDITO_CLIENTE;
------------------------------------------------------------------------------
--CREACION PERFIL DESARROLLO
CREATE PROFILE PERFIL_DES LIMIT 
SESSIONS_PER_USER  2
CONNECT_TIME 240
IDLE_TIME 60
FAILED_LOGIN_ATTEMPTS  5
PASSWORD_LIFE_TIME 90
PASSWORD_LOCK_TIME 1
;
--CREACION DE USUARIO P13_2
CREATE USER MDY2131_P13_2 IDENTIFIED BY "MDY2131.practica_13_2"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER MDY2131_P13_2 QUOTA UNLIMITED ON DATA
PROFILE PERFIL_DES
;
--CREACION DE USUARIO P13_3
CREATE USER MDY2131_P13_3 IDENTIFIED BY "MDY2131.practica_13_3"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER MDY2131_P13_3 QUOTA UNLIMITED ON DATA
PROFILE PERFIL_DES
;
--CREACION DE ROL DESARROLLO
CREATE ROLE ROL_DESARROLLO;
GRANT CREATE ANY VIEW, CREATE ANY TRIGGER, CREATE ANY PROCEDURE, CREATE ANY MATERIALIZED VIEW TO ROL_DESARROLLO;
GRANT INSERT, UPDATE, DELETE ON MDY2131_P13_1.CREDITO_CLIENTE TO ROL_DESARROLLO;
GRANT INSERT, UPDATE, DELETE ON MDY2131_P13_1.PRODUCTO_INVERSION_CLIENTE TO ROL_DESARROLLO;
GRANT INSERT, UPDATE, DELETE ON MDY2131_P13_1.CUOTA_CREDITO_CLIENTE TO ROL_DESARROLLO;
GRANT CREATE SESSION TO MDY2131_P13_2, MDY2131_P13_3;
GRANT ROL_DESARROLLO TO MDY2131_P13_2, MDY2131_P13_3;
ALTER USER MDY2131_P13_3 DEFAULT ROLE ROL_DESARROLLO;
ALTER USER MDY2131_P13_2 DEFAULT ROLE ROL_DESARROLLO;

------------------------------------------------------------------------------
--CREACION PERFIL RECURSOS HUMANOS Y TRANSACCIONES
CREATE PROFILE PERFIL_RRTT LIMIT 
SESSIONS_PER_USER  3
CONNECT_TIME 120
IDLE_TIME 20
FAILED_LOGIN_ATTEMPTS  2
PASSWORD_LIFE_TIME 90
PASSWORD_LOCK_TIME 1
PASSWORD_GRACE_TIME 1
;
--CREACION DE USUARIO P13_4
CREATE USER MDY2131_P13_4 IDENTIFIED BY "MDY2131.practica_13_4"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER MDY2131_P13_4 QUOTA 100M ON DATA
PROFILE PERFIL_RRTT
;
----CREACION ROL RECURSOS HUMANOS
CREATE ROLE ROL_HUMAN;
GRANT SELECT ON MDY2131_P13_1.TIPO_MOVIMIENTO TO ROL_HUMAN;
GRANT SELECT ON MDY2131_P13_1.SUCURSAL TO ROL_HUMAN;
GRANT SELECT ON MDY2131_P13_1.TIPO_CONTRATO TO ROL_HUMAN;
GRANT SELECT ON MDY2131_P13_1.CLIENTE TO ROL_HUMAN;
GRANT SELECT ON MDY2131_P13_1.REGION TO ROL_HUMAN;
GRANT SELECT ON MDY2131_P13_1.PROVINCIA TO ROL_HUMAN;
GRANT SELECT ON MDY2131_P13_1.COMUNA TO ROL_HUMAN;
GRANT CREATE SESSION TO MDY2131_P13_4;
GRANT ROL_HUMAN TO MDY2131_P13_4;
ALTER USER MDY2131_P13_4 DEFAULT ROLE ROL_HUMAN
;
--CREACION P13_5
CREATE USER MDY2131_P13_5 IDENTIFIED BY "MDY2131.practica_13_5"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER MDY2131_P13_5 QUOTA 100M ON DATA
PROFILE PERFIL_RRTT
;
--CREACION P13_6
CREATE USER MDY2131_P13_6 IDENTIFIED BY "MDY2131.practica_13_6"
DEFAULT TABLESPACE "DATA"
TEMPORARY TABLESPACE "TEMP";
ALTER USER MDY2131_P13_6 QUOTA 100M ON DATA
PROFILE PERFIL_RRTT
;
--CREACION ROL DE TRANSACCION
CREATE ROLE ROL_TRANSA;
GRANT SELECT ON MDY2131_P13_1.COMUNA TO ROL_TRANSA;
GRANT SELECT ON MDY2131_P13_1.REGION TO ROL_TRANSA;
GRANT SELECT ON MDY2131_P13_1.PROVINCIA TO ROL_TRANSA;
GRANT SELECT ON MDY2131_P13_1.CLIENTE TO ROL_TRANSA;
GRANT CREATE SESSION TO MDY2131_P13_5, MDY2131_P13_6;
GRANT ROL_TRANSA TO MDY2131_P13_5, MDY2131_P13_6;
ALTER USER MDY2131_P13_5 DEFAULT ROLE ROL_TRANSA;
ALTER USER MDY2131_P13_6 DEFAULT ROLE ROL_TRANSA;